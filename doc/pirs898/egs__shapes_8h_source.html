<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>EGSnrc C++ class library: /home/ftessier/EGSnrc/HEN_HOUSE/egs++/egs_shapes.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EGSnrc C++ class library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>/home/ftessier/EGSnrc/HEN_HOUSE/egs++/egs_shapes.h</h1>  </div>
</div>
<div class="contents">
<a href="egs__shapes_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">###############################################################################</span>
<a name="l00003"></a>00003 <span class="comment">#</span>
<a name="l00004"></a>00004 <span class="comment">#  EGSnrc egs++ shapes headers</span>
<a name="l00005"></a>00005 <span class="comment">#  Copyright (C) 2015 National Research Council Canada</span>
<a name="l00006"></a>00006 <span class="comment">#</span>
<a name="l00007"></a>00007 <span class="comment">#  This file is part of EGSnrc.</span>
<a name="l00008"></a>00008 <span class="comment">#</span>
<a name="l00009"></a>00009 <span class="comment">#  EGSnrc is free software: you can redistribute it and/or modify it under</span>
<a name="l00010"></a>00010 <span class="comment">#  the terms of the GNU Affero General Public License as published by the</span>
<a name="l00011"></a>00011 <span class="comment">#  Free Software Foundation, either version 3 of the License, or (at your</span>
<a name="l00012"></a>00012 <span class="comment">#  option) any later version.</span>
<a name="l00013"></a>00013 <span class="comment">#</span>
<a name="l00014"></a>00014 <span class="comment">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span>
<a name="l00015"></a>00015 <span class="comment">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span>
<a name="l00016"></a>00016 <span class="comment">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span>
<a name="l00017"></a>00017 <span class="comment">#  more details.</span>
<a name="l00018"></a>00018 <span class="comment">#</span>
<a name="l00019"></a>00019 <span class="comment">#  You should have received a copy of the GNU Affero General Public License</span>
<a name="l00020"></a>00020 <span class="comment">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00021"></a>00021 <span class="comment">#</span>
<a name="l00022"></a>00022 <span class="comment">###############################################################################</span>
<a name="l00023"></a>00023 <span class="comment">#</span>
<a name="l00024"></a>00024 <span class="comment">#  Author:          Iwan Kawrakow, 2005</span>
<a name="l00025"></a>00025 <span class="comment">#</span>
<a name="l00026"></a>00026 <span class="comment">#  Contributors:    Frederic Tessier</span>
<a name="l00027"></a>00027 <span class="comment">#</span>
<a name="l00028"></a>00028 <span class="comment">###############################################################################</span>
<a name="l00029"></a>00029 <span class="comment">*/</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 
<a name="l00037"></a>00037 <span class="preprocessor">#ifndef EGS_SHAPES_</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#define EGS_SHAPES_</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="egs__vector_8h.html" title="Provides methods for the manipulation of 3D vectors in cartesian co-ordinates.">egs_vector.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="egs__transformations_8h.html" title="Rotations and affine transformations header.">egs_transformations.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="egs__rndm_8h.html" title="Base random number generator.">egs_rndm.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="egs__object__factory_8h.html" title="Defines objects and object factories.">egs_object_factory.h</a>&quot;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00046"></a>00046 <span class="keyword">using</span> std::string;
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="keyword">class </span><a class="code" href="classEGS__Input.html" title="A class for storing information in a tree-like structure of key-value pairs. This class is used throu...">EGS_Input</a>;
<a name="l00049"></a>00049 
<a name="l00112"></a><a class="code" href="classEGS__BaseShape.html">00112</a> <span class="keyword">class </span><a class="code" href="egs__libconfig_8h.html#ad29043faadac119821ed848d412e2c00" title="Export symbols from the egspp library.">EGS_EXPORT</a> <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a> : <span class="keyword">public</span> <a class="code" href="classEGS__Object.html" title="Base egspp object.">EGS_Object</a> {
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="keyword">public</span>:
<a name="l00115"></a>00115 
<a name="l00117"></a><a class="code" href="classEGS__BaseShape.html#a54e1c5f8069935cf685435acca1c2b69">00117</a>     <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name=<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="classEGS__ObjectFactory.html" title="An object factory.">EGS_ObjectFactory</a> *f=0) :
<a name="l00118"></a>00118         <a class="code" href="classEGS__Object.html" title="Base egspp object.">EGS_Object</a>(Name,f), T(0) {
<a name="l00119"></a>00119         otype = <span class="stringliteral">&quot;base_shape&quot;</span>;
<a name="l00120"></a>00120     };
<a name="l00122"></a><a class="code" href="classEGS__BaseShape.html#a9dc33d827968cc9cd8ccde94ced942d7">00122</a>     <span class="keyword">virtual</span> <a class="code" href="classEGS__BaseShape.html#a9dc33d827968cc9cd8ccde94ced942d7" title="Destructor. Deletes T if it is not null.">~EGS_BaseShape</a>() {
<a name="l00123"></a>00123         <span class="keywordflow">if</span> (T) {
<a name="l00124"></a>00124             <span class="keyword">delete</span> T;
<a name="l00125"></a>00125         }
<a name="l00126"></a>00126     };
<a name="l00127"></a>00127 
<a name="l00134"></a><a class="code" href="classEGS__BaseShape.html#ae334bcb57cf2605531cb527f962f40c7">00134</a>     <span class="keyword">virtual</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> <a class="code" href="classEGS__BaseShape.html#ae334bcb57cf2605531cb527f962f40c7" title="Returns a random 3D vector.">getRandomPoint</a>(<a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *rndm) {
<a name="l00135"></a>00135         <span class="keywordflow">if</span> (T) {
<a name="l00136"></a>00136             <span class="keywordflow">return</span> (*T)*getPoint(rndm);
<a name="l00137"></a>00137         }
<a name="l00138"></a>00138         <span class="keywordflow">else</span> {
<a name="l00139"></a>00139             <span class="keywordflow">return</span> getPoint(rndm);
<a name="l00140"></a>00140         }
<a name="l00141"></a>00141     };
<a name="l00142"></a>00142 
<a name="l00149"></a><a class="code" href="classEGS__BaseShape.html#abb7e1253564afa1cae97dca7bacf0869">00149</a>     <span class="keyword">virtual</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> <a class="code" href="classEGS__BaseShape.html#abb7e1253564afa1cae97dca7bacf0869" title="Sample and return a random 3D vector.">getPoint</a>(<a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *rndm) {
<a name="l00150"></a>00150         <a class="code" href="group__egspp__main.html#ga4454fdf3403e87c098cd55f60dedbe56" title="Always use this function for reporting fatal errors.">egsFatal</a>(<span class="stringliteral">&quot;You need to implement the getPoint function in your &quot;</span>
<a name="l00151"></a>00151                  <span class="stringliteral">&quot;derived class\n&quot;</span>);
<a name="l00152"></a>00152         <span class="keywordflow">return</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a>();
<a name="l00153"></a>00153     };
<a name="l00154"></a>00154 
<a name="l00163"></a>00163     <span class="keywordtype">void</span> setTransformation(<a class="code" href="classEGS__Input.html" title="A class for storing information in a tree-like structure of key-value pairs. This class is used throu...">EGS_Input</a> *inp);
<a name="l00164"></a>00164 
<a name="l00169"></a><a class="code" href="classEGS__BaseShape.html#a0d88fa70ebebda6b2fa1f173cb7cc2c8">00169</a>     <span class="keywordtype">void</span> <a class="code" href="classEGS__BaseShape.html#a0d88fa70ebebda6b2fa1f173cb7cc2c8" title="Set the transformation attached to this shape.">setTransformation</a>(<a class="code" href="classEGS__AffineTransform.html" title="A class providing affine transformations.">EGS_AffineTransform</a> *t) {
<a name="l00170"></a>00170         <span class="keywordflow">if</span> (T) {
<a name="l00171"></a>00171             <span class="keyword">delete</span> T;
<a name="l00172"></a>00172         }
<a name="l00173"></a>00173         T = <span class="keyword">new</span> <a class="code" href="classEGS__AffineTransform.html" title="A class providing affine transformations.">EGS_AffineTransform</a>(*t);
<a name="l00174"></a>00174     };
<a name="l00175"></a>00175 
<a name="l00178"></a><a class="code" href="classEGS__BaseShape.html#a6c5d187fe12ecf80aae323a8ab8681a3">00178</a>     <span class="keyword">const</span> <a class="code" href="classEGS__AffineTransform.html" title="A class providing affine transformations.">EGS_AffineTransform</a> *<a class="code" href="classEGS__BaseShape.html#a6c5d187fe12ecf80aae323a8ab8681a3" title="Get a pointer to the affine transformation attached to this shape.">getTransform</a>()<span class="keyword"> const </span>{
<a name="l00179"></a>00179         <span class="keywordflow">return</span> T;
<a name="l00180"></a>00180     };
<a name="l00181"></a>00181 
<a name="l00189"></a>00189     <span class="keyword">static</span> <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a> *createShape(<a class="code" href="classEGS__Input.html" title="A class for storing information in a tree-like structure of key-value pairs. This class is used throu...">EGS_Input</a> *inp);
<a name="l00190"></a>00190 
<a name="l00197"></a>00197     <span class="keyword">static</span> <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a> *getShape(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name);
<a name="l00198"></a>00198 
<a name="l00204"></a><a class="code" href="classEGS__BaseShape.html#a49770b9ae14073dc0aee2b0795d0b285">00204</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classEGS__BaseShape.html#a49770b9ae14073dc0aee2b0795d0b285">supportsDirectionMethod</a>()<span class="keyword"> const </span>{
<a name="l00205"></a>00205         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00206"></a>00206     };
<a name="l00207"></a>00207 
<a name="l00220"></a><a class="code" href="classEGS__BaseShape.html#a36d3970fbe24be3b2701124a76fcef09">00220</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> getPointSourceDirection(<span class="keyword">const</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;xo,
<a name="l00221"></a>00221                                          <a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *rndm, <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;u, EGS_Float &amp;wt) {
<a name="l00222"></a>00222         <a class="code" href="group__egspp__main.html#ga4454fdf3403e87c098cd55f60dedbe56" title="Always use this function for reporting fatal errors.">egsFatal</a>(<span class="stringliteral">&quot;getPointSourceDirection: you have to implement this &quot;</span>
<a name="l00223"></a>00223                  <span class="stringliteral">&quot;method for the %s shape if you want to use it\n&quot;</span>,otype.c_str());
<a name="l00224"></a>00224     };
<a name="l00225"></a>00225 
<a name="l00232"></a><a class="code" href="classEGS__BaseShape.html#a8307bc7ddfa99a380b3ae1f9987d2464">00232</a>     <span class="keyword">virtual</span> EGS_Float <a class="code" href="classEGS__BaseShape.html#a8307bc7ddfa99a380b3ae1f9987d2464">area</a>()<span class="keyword"> const </span>{
<a name="l00233"></a>00233         <span class="keywordflow">return</span> 1;
<a name="l00234"></a><a class="code" href="classEGS__BaseShape.html#a54bec7f692a6e7bbf8b57d920b6dfe91">00234</a>     };
<a name="l00235"></a>00235 
<a name="l00236"></a>00236 <span class="keyword">protected</span>:
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     <a class="code" href="classEGS__AffineTransform.html" title="A class providing affine transformations.">EGS_AffineTransform</a> *T; 
<a name="l00239"></a>00239 
<a name="l00240"></a>00240 };
<a name="l00241"></a>00241 
<a name="l00252"></a><a class="code" href="classEGS__SurfaceShape.html">00252</a> <span class="keyword">class  </span><a class="code" href="egs__libconfig_8h.html#ad29043faadac119821ed848d412e2c00" title="Export symbols from the egspp library.">EGS_EXPORT</a> <a class="code" href="classEGS__SurfaceShape.html" title="A surface shape.">EGS_SurfaceShape</a> : <span class="keyword">public</span> <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a> {
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 <span class="keyword">public</span>:
<a name="l00255"></a>00255 
<a name="l00257"></a><a class="code" href="classEGS__SurfaceShape.html#a497ce7f4e3697e56378b2d42f6d28538">00257</a>     <a class="code" href="classEGS__SurfaceShape.html" title="A surface shape.">EGS_SurfaceShape</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name=<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="classEGS__ObjectFactory.html" title="An object factory.">EGS_ObjectFactory</a> *f=0) :
<a name="l00258"></a>00258         <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a>(Name,f), A(1) {};
<a name="l00260"></a><a class="code" href="classEGS__SurfaceShape.html#a819272407c3c5bfe4926d9472cd74b11">00260</a>     <a class="code" href="classEGS__SurfaceShape.html#a819272407c3c5bfe4926d9472cd74b11" title="Destructor. Does nothing.">~EGS_SurfaceShape</a>() {};
<a name="l00264"></a><a class="code" href="classEGS__SurfaceShape.html#a341a99199220265c79b4049c9e41629f">00264</a>     <span class="keywordtype">bool</span> <a class="code" href="classEGS__SurfaceShape.html#a341a99199220265c79b4049c9e41629f" title="Always returns true. Shapes derived from this class must implement the getPoint() method to return po...">supportsDirectionMethod</a>()<span class="keyword"> const </span>{
<a name="l00265"></a>00265         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00266"></a>00266     };
<a name="l00268"></a><a class="code" href="classEGS__SurfaceShape.html#a2c18232c9243275a28f4bb2a651bd281">00268</a>     EGS_Float <a class="code" href="classEGS__SurfaceShape.html#a2c18232c9243275a28f4bb2a651bd281" title="Returns the area of this surface shape.">area</a>()<span class="keyword"> const </span>{
<a name="l00269"></a>00269         <span class="keywordflow">return</span> A;
<a name="l00270"></a>00270     };
<a name="l00275"></a><a class="code" href="classEGS__SurfaceShape.html#aa290c002ec3e3ea654469036997d14ae">00275</a>     <span class="keywordtype">void</span> <a class="code" href="classEGS__BaseShape.html#a36d3970fbe24be3b2701124a76fcef09">getPointSourceDirection</a>(<span class="keyword">const</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;Xo,
<a name="l00276"></a>00276                                  <a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *rndm, <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;u, EGS_Float &amp;wt) {
<a name="l00277"></a>00277         <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> xo = T ? Xo*(*T) : Xo;
<a name="l00278"></a>00278         <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> x = <a class="code" href="classEGS__BaseShape.html#abb7e1253564afa1cae97dca7bacf0869" title="Sample and return a random 3D vector.">getPoint</a>(rndm);
<a name="l00279"></a>00279         u = x - xo;
<a name="l00280"></a>00280         EGS_Float d2i = 1/u.length2(), di = sqrt(d2i);
<a name="l00281"></a>00281         u *= di;
<a name="l00282"></a>00282         wt = A*fabs(u.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a>)*d2i;
<a name="l00283"></a>00283         <span class="keywordflow">if</span> (T) {
<a name="l00284"></a>00284             T-&gt;rotate(u);
<a name="l00285"></a>00285         }
<a name="l00286"></a><a class="code" href="classEGS__SurfaceShape.html#ae5ec007b425bc9e8d65ffeb4a4d5824b">00286</a>     };
<a name="l00287"></a>00287 
<a name="l00288"></a>00288 <span class="keyword">protected</span>:
<a name="l00289"></a>00289 
<a name="l00295"></a>00295     EGS_Float A;
<a name="l00296"></a>00296 
<a name="l00297"></a>00297 };
<a name="l00298"></a>00298 
<a name="l00314"></a><a class="code" href="classEGS__PointShape.html">00314</a> <span class="keyword">class </span><a class="code" href="egs__libconfig_8h.html#ad29043faadac119821ed848d412e2c00" title="Export symbols from the egspp library.">EGS_EXPORT</a> <a class="code" href="classEGS__PointShape.html" title="A point shape. This is the simplest shape possible: it simply always returns the same point...">EGS_PointShape</a> : <span class="keyword">public</span> <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a> {
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 <span class="keyword">public</span>:
<a name="l00317"></a>00317 
<a name="l00319"></a><a class="code" href="classEGS__PointShape.html#a93b9113c678a6a50f3365e724b8653cd">00319</a>     <a class="code" href="classEGS__PointShape.html" title="A point shape. This is the simplest shape possible: it simply always returns the same point...">EGS_PointShape</a>(<span class="keyword">const</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;Xo = <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a>(),
<a name="l00320"></a>00320                    <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name=<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="classEGS__ObjectFactory.html" title="An object factory.">EGS_ObjectFactory</a> *f=0) :
<a name="l00321"></a>00321         <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a>(Name,f), xo(Xo) {
<a name="l00322"></a>00322         otype = <span class="stringliteral">&quot;point&quot;</span>;
<a name="l00323"></a>00323     };
<a name="l00324"></a>00324     ~<a class="code" href="classEGS__PointShape.html" title="A point shape. This is the simplest shape possible: it simply always returns the same point...">EGS_PointShape</a>() { };
<a name="l00326"></a><a class="code" href="classEGS__PointShape.html#a8996f3704d0120ce5fb67b7c7fbf3662">00326</a>     <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> <a class="code" href="classEGS__PointShape.html#a8996f3704d0120ce5fb67b7c7fbf3662" title="Returns a fixed point.">getPoint</a>(<a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *) {
<a name="l00327"></a>00327         <span class="keywordflow">return</span> xo;
<a name="l00328"></a>00328     };
<a name="l00332"></a>00332     <a class="code" href="classEGS__Object.html" title="Base egspp object.">EGS_Object</a> *<a class="code" href="classEGS__Object.html#a1048cc275a04cbffe4ec2d608fbe52dc" title="Create an object from the infromation pointed to by inp.">createObject</a>(<a class="code" href="classEGS__Input.html" title="A class for storing information in a tree-like structure of key-value pairs. This class is used throu...">EGS_Input</a> *inp);
<a name="l00333"></a>00333 
<a name="l00334"></a>00334 <span class="keyword">protected</span>:
<a name="l00335"></a>00335 
<a name="l00336"></a><a class="code" href="classEGS__PointShape.html#a47d413ede5fb9a1bbded8b17d719cec8">00336</a>     <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a>  <a class="code" href="classEGS__PointShape.html#a47d413ede5fb9a1bbded8b17d719cec8" title="The point position.">xo</a>; 
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 };
<a name="l00339"></a>00339 
<a name="l00356"></a><a class="code" href="classEGS__BoxShape.html">00356</a> <span class="keyword">class </span><a class="code" href="egs__libconfig_8h.html#ad29043faadac119821ed848d412e2c00" title="Export symbols from the egspp library.">EGS_EXPORT</a> <a class="code" href="classEGS__BoxShape.html" title="A box shape.">EGS_BoxShape</a> : <span class="keyword">public</span> <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a> {
<a name="l00357"></a>00357 
<a name="l00358"></a>00358 <span class="keyword">protected</span>:
<a name="l00359"></a>00359 
<a name="l00360"></a><a class="code" href="classEGS__BoxShape.html#a6ef094995613a6a5463dde2f188b0519">00360</a>     EGS_Float  ax, ay, <a class="code" href="classEGS__BoxShape.html#a6ef094995613a6a5463dde2f188b0519" title="The box size.">az</a>; 
<a name="l00361"></a>00361 
<a name="l00362"></a>00362 <span class="keyword">public</span>:
<a name="l00363"></a>00363 
<a name="l00365"></a><a class="code" href="classEGS__BoxShape.html#a9cd36077601bce3b89935288ab361316">00365</a>     <a class="code" href="classEGS__BoxShape.html" title="A box shape.">EGS_BoxShape</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name=<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="classEGS__ObjectFactory.html" title="An object factory.">EGS_ObjectFactory</a> *f=0) :
<a name="l00366"></a>00366         <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a>(Name,f), ax(1), ay(1), az(1) {
<a name="l00367"></a>00367         otype=<span class="stringliteral">&quot;box&quot;</span>;
<a name="l00368"></a>00368     };
<a name="l00370"></a><a class="code" href="classEGS__BoxShape.html#ad13176988d41b2486fcd8b0c26ffbcac">00370</a>     <a class="code" href="classEGS__BoxShape.html" title="A box shape.">EGS_BoxShape</a>(EGS_Float A, <span class="keyword">const</span> <a class="code" href="classEGS__AffineTransform.html" title="A class providing affine transformations.">EGS_AffineTransform</a> *t = 0,
<a name="l00371"></a>00371                  <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name=<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="classEGS__ObjectFactory.html" title="An object factory.">EGS_ObjectFactory</a> *f=0) :
<a name="l00372"></a>00372         <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a>(Name,f), ax(A), ay(A), az(A) {
<a name="l00373"></a>00373         <span class="keywordflow">if</span> (t) {
<a name="l00374"></a>00374             T = <span class="keyword">new</span> <a class="code" href="classEGS__AffineTransform.html" title="A class providing affine transformations.">EGS_AffineTransform</a>(*t);
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376         otype=<span class="stringliteral">&quot;box&quot;</span>;
<a name="l00377"></a>00377     };
<a name="l00379"></a><a class="code" href="classEGS__BoxShape.html#ad46ec716f55ba10feb3fb4b9ac7c215f">00379</a>     <a class="code" href="classEGS__BoxShape.html" title="A box shape.">EGS_BoxShape</a>(EGS_Float Ax, EGS_Float Ay, EGS_Float Az,
<a name="l00380"></a>00380                  <span class="keyword">const</span> <a class="code" href="classEGS__AffineTransform.html" title="A class providing affine transformations.">EGS_AffineTransform</a> *t = 0,
<a name="l00381"></a>00381                  <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name=<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="classEGS__ObjectFactory.html" title="An object factory.">EGS_ObjectFactory</a> *f=0) :
<a name="l00382"></a>00382         <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a>(Name,f), ax(Ax), ay(Ay), az(Az) {
<a name="l00383"></a>00383         <span class="keywordflow">if</span> (t) {
<a name="l00384"></a>00384             T = <span class="keyword">new</span> <a class="code" href="classEGS__AffineTransform.html" title="A class providing affine transformations.">EGS_AffineTransform</a>(*t);
<a name="l00385"></a>00385         }
<a name="l00386"></a>00386         otype=<span class="stringliteral">&quot;box&quot;</span>;
<a name="l00387"></a>00387     };
<a name="l00389"></a><a class="code" href="classEGS__BoxShape.html#aef9ebb4b45565eb0031426059f14fbce">00389</a>     <a class="code" href="classEGS__BoxShape.html#aef9ebb4b45565eb0031426059f14fbce" title="Destructor. Does nothing.">~EGS_BoxShape</a>() { };
<a name="l00390"></a>00390 
<a name="l00392"></a><a class="code" href="classEGS__BoxShape.html#a809c32c1f9741bf00cd8a6f9d73cc20a">00392</a>     <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> <a class="code" href="classEGS__BoxShape.html#a809c32c1f9741bf00cd8a6f9d73cc20a" title="Returns a point uniformely distributed within the box.">getPoint</a>(<a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *rndm) {
<a name="l00393"></a>00393         <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> v(ax*(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-0.5),
<a name="l00394"></a>00394                      ay*(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-0.5),
<a name="l00395"></a>00395                      az*(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-0.5));
<a name="l00396"></a>00396         <span class="keywordflow">return</span> v;
<a name="l00397"></a>00397     };
<a name="l00398"></a>00398 
<a name="l00402"></a>00402     <a class="code" href="classEGS__Object.html" title="Base egspp object.">EGS_Object</a> *<a class="code" href="classEGS__Object.html#a1048cc275a04cbffe4ec2d608fbe52dc" title="Create an object from the infromation pointed to by inp.">createObject</a>(<a class="code" href="classEGS__Input.html" title="A class for storing information in a tree-like structure of key-value pairs. This class is used throu...">EGS_Input</a> *);
<a name="l00403"></a>00403 
<a name="l00407"></a><a class="code" href="classEGS__BoxShape.html#a8ad684bd71be02e9df2a907d6c76763e">00407</a>     <span class="keywordtype">bool</span> <a class="code" href="classEGS__BoxShape.html#a8ad684bd71be02e9df2a907d6c76763e" title="Returns true. (It is easy to implement the getPointSourceDirection() method for a box...">supportsDirectionMethod</a>()<span class="keyword"> const </span>{
<a name="l00408"></a>00408         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00409"></a>00409     };
<a name="l00410"></a>00410 
<a name="l00415"></a><a class="code" href="classEGS__BoxShape.html#a56d0b5bfadf81926d705bd98319fd152">00415</a>     <span class="keywordtype">void</span> <a class="code" href="classEGS__BaseShape.html#a36d3970fbe24be3b2701124a76fcef09">getPointSourceDirection</a>(<span class="keyword">const</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;Xo,
<a name="l00416"></a>00416                                  <a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *rndm, <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;u, EGS_Float &amp;wt) {
<a name="l00417"></a>00417         <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> xo = T ? Xo*(*T) : Xo;
<a name="l00418"></a>00418         EGS_Float eta = rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()*<a class="code" href="classEGS__BaseShape.html#a8307bc7ddfa99a380b3ae1f9987d2464">area</a>();
<a name="l00419"></a>00419         <span class="keywordflow">if</span> (eta &lt; 2*ax*ay) {
<a name="l00420"></a>00420             u.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a> = ax*(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-0.5);
<a name="l00421"></a>00421             u.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a> = ay*(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-0.5);
<a name="l00422"></a>00422             <span class="keywordflow">if</span> (eta &lt; ax*ay) {
<a name="l00423"></a>00423                 u.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> = az/2;
<a name="l00424"></a>00424                 wt = u.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> - xo.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a>;
<a name="l00425"></a>00425             }
<a name="l00426"></a>00426             <span class="keywordflow">else</span> {
<a name="l00427"></a>00427                 u.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> = -az/2;
<a name="l00428"></a>00428                 wt = xo.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> - u.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a>;
<a name="l00429"></a>00429             }
<a name="l00430"></a>00430         }
<a name="l00431"></a>00431         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (eta &lt; 2*(ax*ay + ax*az)) {
<a name="l00432"></a>00432             u.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a> = ax*(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-0.5);
<a name="l00433"></a>00433             u.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> = az*(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-0.5);
<a name="l00434"></a>00434             <span class="keywordflow">if</span> (eta &lt; 2*ax*ay + ax*az) {
<a name="l00435"></a>00435                 u.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a> = ay/2;
<a name="l00436"></a>00436                 wt = u.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a> - xo.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a>;
<a name="l00437"></a>00437             }
<a name="l00438"></a>00438             <span class="keywordflow">else</span> {
<a name="l00439"></a>00439                 u.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a> = -ay/2;
<a name="l00440"></a>00440                 wt = xo.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a> - u.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a>;
<a name="l00441"></a>00441             }
<a name="l00442"></a>00442         }
<a name="l00443"></a>00443         <span class="keywordflow">else</span> {
<a name="l00444"></a>00444             eta -= 2*(ax*ay + ax*az);
<a name="l00445"></a>00445             u.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a> = ay*(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-0.5);
<a name="l00446"></a>00446             u.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> = az*(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-0.5);
<a name="l00447"></a>00447             <span class="keywordflow">if</span> (eta &lt; ay*az) {
<a name="l00448"></a>00448                 u.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a> = ax/2;
<a name="l00449"></a>00449                 wt = u.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a> - xo.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a>;
<a name="l00450"></a>00450             }
<a name="l00451"></a>00451             <span class="keywordflow">else</span> {
<a name="l00452"></a>00452                 u.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a> = -ax/2;
<a name="l00453"></a>00453                 wt = xo.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a> - u.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a>;
<a name="l00454"></a>00454             }
<a name="l00455"></a>00455         }
<a name="l00456"></a>00456         u -= xo;
<a name="l00457"></a>00457         EGS_Float d2 = u.length2(), d = sqrt(d2);
<a name="l00458"></a>00458         u *= (1/d);
<a name="l00459"></a>00459         wt *= (<a class="code" href="classEGS__BaseShape.html#a8307bc7ddfa99a380b3ae1f9987d2464">area</a>()/(d2*d));
<a name="l00460"></a>00460         <span class="keywordflow">if</span> (T) {
<a name="l00461"></a>00461             T-&gt;rotate(u);
<a name="l00462"></a>00462         }
<a name="l00463"></a>00463     };
<a name="l00465"></a><a class="code" href="classEGS__BoxShape.html#a1e5bbc7386af31f08540638247b66d5b">00465</a>     EGS_Float <a class="code" href="classEGS__BoxShape.html#a1e5bbc7386af31f08540638247b66d5b" title="Returns the box surface area.">area</a>()<span class="keyword"> const </span>{
<a name="l00466"></a>00466         <span class="keywordflow">return</span> 2*(ax*ay + ax*az + ay*az);
<a name="l00467"></a>00467     };
<a name="l00468"></a>00468 
<a name="l00469"></a>00469 };
<a name="l00470"></a>00470 
<a name="l00488"></a><a class="code" href="classEGS__SphereShape.html">00488</a> <span class="keyword">class </span><a class="code" href="egs__libconfig_8h.html#ad29043faadac119821ed848d412e2c00" title="Export symbols from the egspp library.">EGS_EXPORT</a> <a class="code" href="classEGS__SphereShape.html" title="A sphere shape.">EGS_SphereShape</a> : <span class="keyword">public</span> <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a> {
<a name="l00489"></a>00489 
<a name="l00490"></a>00490 <span class="keyword">protected</span>:
<a name="l00491"></a>00491 
<a name="l00492"></a><a class="code" href="classEGS__SphereShape.html#aaf94011657138b86598fbcfa0f9e5809">00492</a>     EGS_Float  <a class="code" href="classEGS__SphereShape.html#aaf94011657138b86598fbcfa0f9e5809" title="The sphere radius.">R</a>;     
<a name="l00493"></a><a class="code" href="classEGS__SphereShape.html#ad5d45d3bc6ff77988720db0258f3ce7e">00493</a>     <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> <a class="code" href="classEGS__SphereShape.html#ad5d45d3bc6ff77988720db0258f3ce7e" title="The sphere midpoint.">xo</a>;    
<a name="l00494"></a>00494 
<a name="l00495"></a>00495 <span class="keyword">public</span>:
<a name="l00496"></a>00496 
<a name="l00498"></a><a class="code" href="classEGS__SphereShape.html#a0a81fe670f878c83b60a6802f4a6c49f">00498</a>     <a class="code" href="classEGS__SphereShape.html" title="A sphere shape.">EGS_SphereShape</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name=<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="classEGS__ObjectFactory.html" title="An object factory.">EGS_ObjectFactory</a> *f=0) :
<a name="l00499"></a>00499         <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a>(Name,f), R(1), xo() {
<a name="l00500"></a>00500         otype=<span class="stringliteral">&quot;sphere&quot;</span>;
<a name="l00501"></a>00501     };
<a name="l00503"></a><a class="code" href="classEGS__SphereShape.html#a1ed3c73a23bb4044fbf89e8b1b893b23">00503</a>     <a class="code" href="classEGS__SphereShape.html" title="A sphere shape.">EGS_SphereShape</a>(EGS_Float r, <span class="keyword">const</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;Xo = <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a>(0,0,0),
<a name="l00504"></a>00504                     <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name=<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="classEGS__ObjectFactory.html" title="An object factory.">EGS_ObjectFactory</a> *f=0) :
<a name="l00505"></a>00505         <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a>(Name,f), R(r), xo(Xo) {
<a name="l00506"></a>00506         otype = <span class="stringliteral">&quot;sphere&quot;</span>;
<a name="l00507"></a>00507     };
<a name="l00509"></a><a class="code" href="classEGS__SphereShape.html#a6f1cfc18fb2c22dceb0c095b7272be60">00509</a>     <a class="code" href="classEGS__SphereShape.html#a6f1cfc18fb2c22dceb0c095b7272be60">~EGS_SphereShape</a>() {};
<a name="l00510"></a>00510 
<a name="l00512"></a><a class="code" href="classEGS__SphereShape.html#aa0fdd4cfef27a7bca76a5232412715e1">00512</a>     <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> <a class="code" href="classEGS__SphereShape.html#aa0fdd4cfef27a7bca76a5232412715e1" title="Returns a random point within the sphere.">getPoint</a>(<a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *rndm) {
<a name="l00513"></a>00513         EGS_Float r = rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>(), r1 = rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>(),
<a name="l00514"></a>00514                   r2 = rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>();
<a name="l00515"></a>00515         <span class="keywordflow">if</span> (r1 &gt; r) {
<a name="l00516"></a>00516             r = r1;
<a name="l00517"></a>00517         }
<a name="l00518"></a>00518         <span class="keywordflow">if</span> (r2 &gt; r) {
<a name="l00519"></a>00519             r = r2;
<a name="l00520"></a>00520         }
<a name="l00521"></a>00521         EGS_Float cost = 2*rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-1;
<a name="l00522"></a>00522         EGS_Float sint = sqrt(1-cost*cost);
<a name="l00523"></a>00523         r1 = R*r*sint;
<a name="l00524"></a>00524         EGS_Float cphi, sphi;
<a name="l00525"></a>00525         rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#a1a8125374996eec60b8e017aca93c047" title="Sets cphi and sphi to the cosine and sine of a random angle uniformely distributed between 0 and ...">getAzimuth</a>(cphi,sphi);
<a name="l00526"></a>00526         <span class="keywordflow">return</span> xo + <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a>(r1*cphi,r1*sphi,R*r*cost);
<a name="l00527"></a>00527     };
<a name="l00528"></a>00528 
<a name="l00532"></a>00532     <a class="code" href="classEGS__Object.html" title="Base egspp object.">EGS_Object</a> *<a class="code" href="classEGS__Object.html#a1048cc275a04cbffe4ec2d608fbe52dc" title="Create an object from the infromation pointed to by inp.">createObject</a>(<a class="code" href="classEGS__Input.html" title="A class for storing information in a tree-like structure of key-value pairs. This class is used throu...">EGS_Input</a> *inp);
<a name="l00533"></a>00533 
<a name="l00537"></a><a class="code" href="classEGS__SphereShape.html#ae3fd08d6c77a1221311242d4dcd0acf5">00537</a>     <span class="keywordtype">bool</span> <a class="code" href="classEGS__SphereShape.html#ae3fd08d6c77a1221311242d4dcd0acf5" title="Returns true. (It is easy to implement the getPointSourceDirection() method for a sphere...">supportsDirectionMethod</a>()<span class="keyword"> const </span>{
<a name="l00538"></a>00538         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00539"></a>00539     };
<a name="l00540"></a>00540 
<a name="l00545"></a><a class="code" href="classEGS__SphereShape.html#a53834fa055061e1953b0289ff801232b">00545</a>     <span class="keywordtype">void</span> <a class="code" href="classEGS__BaseShape.html#a36d3970fbe24be3b2701124a76fcef09">getPointSourceDirection</a>(<span class="keyword">const</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;Xo,
<a name="l00546"></a>00546                                  <a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *rndm, <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;u, EGS_Float &amp;wt) {
<a name="l00547"></a>00547         <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> xo = T ? Xo*(*T) : Xo;
<a name="l00548"></a>00548         EGS_Float cost = 2*rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-1;
<a name="l00549"></a>00549         EGS_Float sint = 1-cost*cost;
<a name="l00550"></a>00550         <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> x;
<a name="l00551"></a>00551         <span class="keywordflow">if</span> (sint &gt; 1e-10) {
<a name="l00552"></a>00552             EGS_Float cphi, sphi;
<a name="l00553"></a>00553             rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#a1a8125374996eec60b8e017aca93c047" title="Sets cphi and sphi to the cosine and sine of a random angle uniformely distributed between 0 and ...">getAzimuth</a>(cphi,sphi);
<a name="l00554"></a>00554             sint = R*sqrt(sint);
<a name="l00555"></a>00555             x.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a> = sint*cphi;
<a name="l00556"></a>00556             x.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a> = sint*sphi;
<a name="l00557"></a>00557             x.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> = R*cost;
<a name="l00558"></a>00558         }
<a name="l00559"></a>00559         <span class="keywordflow">else</span> {
<a name="l00560"></a>00560             x.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> = R*cost;
<a name="l00561"></a>00561         }
<a name="l00562"></a>00562         u = (x + this-&gt;xo) - xo;
<a name="l00563"></a>00563         EGS_Float di = 1/u.length();
<a name="l00564"></a>00564         u *= di;
<a name="l00565"></a>00565         wt = u*x*4*M_PI*R*di*di;
<a name="l00566"></a>00566     };
<a name="l00568"></a><a class="code" href="classEGS__SphereShape.html#a76d385c1e458e44f16e5042770e9dab7">00568</a>     EGS_Float <a class="code" href="classEGS__SphereShape.html#a76d385c1e458e44f16e5042770e9dab7" title="Returns the sphere surface area.">area</a>()<span class="keyword"> const </span>{
<a name="l00569"></a>00569         <span class="keywordflow">return</span> 4*M_PI*R*R;
<a name="l00570"></a>00570     };
<a name="l00571"></a>00571 };
<a name="l00572"></a>00572 
<a name="l00596"></a><a class="code" href="classEGS__CylinderShape.html">00596</a> <span class="keyword">class </span><a class="code" href="egs__libconfig_8h.html#ad29043faadac119821ed848d412e2c00" title="Export symbols from the egspp library.">EGS_EXPORT</a> <a class="code" href="classEGS__CylinderShape.html" title="A cylinder shape.">EGS_CylinderShape</a> : <span class="keyword">public</span> <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a> {
<a name="l00597"></a>00597 
<a name="l00598"></a>00598 <span class="keyword">protected</span>:
<a name="l00599"></a>00599 
<a name="l00600"></a><a class="code" href="classEGS__CylinderShape.html#aa302cfc9c8c0885f8459506c979dd603">00600</a>     EGS_Float  <a class="code" href="classEGS__CylinderShape.html#aa302cfc9c8c0885f8459506c979dd603" title="Cylinder radius.">R</a>;       
<a name="l00601"></a><a class="code" href="classEGS__CylinderShape.html#a35a86f084a4b5f6192675e1afda17784">00601</a>     EGS_Float  <a class="code" href="classEGS__CylinderShape.html#a35a86f084a4b5f6192675e1afda17784" title="Cylinder height.">h</a>;       
<a name="l00602"></a><a class="code" href="classEGS__CylinderShape.html#accb7ea0569784b9ce83f6e3fd71709dc">00602</a>     <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> <a class="code" href="classEGS__CylinderShape.html#accb7ea0569784b9ce83f6e3fd71709dc" title="midpoint">xo</a>;      
<a name="l00603"></a><a class="code" href="classEGS__CylinderShape.html#a4ea94bbd5b59e593004d4bada208a155">00603</a>     <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> <a class="code" href="classEGS__CylinderShape.html#a4ea94bbd5b59e593004d4bada208a155" title="Cylinder axis.">a</a>;       
<a name="l00604"></a>00604     EGS_Float  phi_min;
<a name="l00605"></a>00605     EGS_Float  phi_max;
<a name="l00606"></a><a class="code" href="classEGS__CylinderShape.html#a5b1d808e7f9cfffd6a8a6ca264e0b055">00606</a>     <span class="keywordtype">bool</span>       <a class="code" href="classEGS__CylinderShape.html#a5b1d808e7f9cfffd6a8a6ca264e0b055" title="True, if azimuthal range restricted.">has_phi</a>; 
<a name="l00607"></a>00607 
<a name="l00609"></a><a class="code" href="classEGS__CylinderShape.html#a2673871401d75e7902e3e8b61c74d792">00609</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> getPointInCircle(<a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *rndm, EGS_Float &amp;x,
<a name="l00610"></a>00610                                  EGS_Float &amp;y) {
<a name="l00611"></a>00611         <span class="keywordflow">if</span> (!has_phi) {
<a name="l00612"></a>00612             <span class="keywordflow">do</span> {
<a name="l00613"></a>00613                 x = 2*rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-1;
<a name="l00614"></a>00614                 y = 2*rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-1;
<a name="l00615"></a>00615             }
<a name="l00616"></a>00616             <span class="keywordflow">while</span> (x*x + y*y &gt; 1);
<a name="l00617"></a>00617             x *= R;
<a name="l00618"></a>00618             y *= R;
<a name="l00619"></a>00619         }
<a name="l00620"></a>00620         <span class="keywordflow">else</span> {
<a name="l00621"></a>00621             EGS_Float r = R*sqrt(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>());
<a name="l00622"></a>00622             EGS_Float eta = rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>();
<a name="l00623"></a>00623             EGS_Float phi = phi_min*(1-eta) + phi_max*eta;
<a name="l00624"></a>00624             x = r*cos(phi);
<a name="l00625"></a>00625             y = r*sin(phi);
<a name="l00626"></a>00626         }
<a name="l00627"></a>00627     };
<a name="l00628"></a>00628 
<a name="l00629"></a>00629 
<a name="l00630"></a>00630 <span class="keyword">public</span>:
<a name="l00631"></a>00631 
<a name="l00635"></a><a class="code" href="classEGS__CylinderShape.html#a580091b8ebd572a7c54e617c38661d41">00635</a>     <a class="code" href="classEGS__CylinderShape.html" title="A cylinder shape.">EGS_CylinderShape</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name=<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="classEGS__ObjectFactory.html" title="An object factory.">EGS_ObjectFactory</a> *f=0) :
<a name="l00636"></a>00636         <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a>(), R(1), h(1), xo(), a(0,0,1),
<a name="l00637"></a>00637         phi_min(0), phi_max(2*M_PI), has_phi(false) {
<a name="l00638"></a>00638         otype=<span class="stringliteral">&quot;cylinder&quot;</span>;
<a name="l00639"></a>00639     };
<a name="l00640"></a>00640     <a class="code" href="classEGS__CylinderShape.html" title="A cylinder shape.">EGS_CylinderShape</a>(EGS_Float r, EGS_Float H,
<a name="l00641"></a>00641                       <span class="keyword">const</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;Xo = <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a>(0,0,0),
<a name="l00642"></a>00642                       <span class="keyword">const</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;A = <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a>(0,0,1),
<a name="l00643"></a>00643                       <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name=<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="classEGS__ObjectFactory.html" title="An object factory.">EGS_ObjectFactory</a> *f=0) :
<a name="l00644"></a>00644         <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a>(Name,f), R(r), h(H), xo(Xo), a(A),
<a name="l00645"></a>00645         phi_min(0), phi_max(2*M_PI), has_phi(false) {
<a name="l00646"></a>00646         <a class="code" href="classEGS__RotationMatrix.html" title="A class for vector rotations.">EGS_RotationMatrix</a> rmat(a);
<a name="l00647"></a>00647         <span class="keywordflow">if</span> (xo.length2() &gt; 1e-10 || !rmat.isI()) {
<a name="l00648"></a>00648             T = <span class="keyword">new</span> <a class="code" href="classEGS__AffineTransform.html" title="A class providing affine transformations.">EGS_AffineTransform</a>(rmat.inverse(),xo);
<a name="l00649"></a>00649         }
<a name="l00650"></a>00650         otype=<span class="stringliteral">&quot;cylinder&quot;</span>;
<a name="l00651"></a>00651     };
<a name="l00655"></a><a class="code" href="classEGS__CylinderShape.html#a4a88b562bb7c13171ed2948363305059">00655</a>     <a class="code" href="classEGS__CylinderShape.html" title="A cylinder shape.">EGS_CylinderShape</a>(EGS_Float r, EGS_Float H, <span class="keyword">const</span> <a class="code" href="classEGS__AffineTransform.html" title="A class providing affine transformations.">EGS_AffineTransform</a> *t,
<a name="l00656"></a>00656                       <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;Name=<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="classEGS__ObjectFactory.html" title="An object factory.">EGS_ObjectFactory</a> *f=0) :
<a name="l00657"></a>00657         <a class="code" href="classEGS__BaseShape.html" title="Base shape class. All shapes in the EGSnrc C++ class library are derived from EGS_BaseShape.">EGS_BaseShape</a>(Name,f), R(r), h(H),
<a name="l00658"></a>00658         phi_min(0), phi_max(2*M_PI), has_phi(false) {
<a name="l00659"></a>00659         <span class="keywordflow">if</span> (t) {
<a name="l00660"></a>00660             T = <span class="keyword">new</span> <a class="code" href="classEGS__AffineTransform.html" title="A class providing affine transformations.">EGS_AffineTransform</a>(*t);
<a name="l00661"></a>00661         }
<a name="l00662"></a>00662         otype=<span class="stringliteral">&quot;cylinder&quot;</span>;
<a name="l00663"></a>00663     };
<a name="l00665"></a><a class="code" href="classEGS__CylinderShape.html#a73c018c69cf936059d46c69d19264e63">00665</a>     <a class="code" href="classEGS__CylinderShape.html#a73c018c69cf936059d46c69d19264e63">~EGS_CylinderShape</a>() { };
<a name="l00666"></a>00666 
<a name="l00668"></a><a class="code" href="classEGS__CylinderShape.html#a2b22a214a767a51ace13551bdea8c7b8">00668</a>     <span class="keywordtype">void</span> <a class="code" href="classEGS__CylinderShape.html#a2b22a214a767a51ace13551bdea8c7b8">setPhiRange</a>(EGS_Float Phi_min, EGS_Float Phi_max) {
<a name="l00669"></a>00669         <span class="keywordflow">if</span> (Phi_min &lt; Phi_max) {
<a name="l00670"></a>00670             phi_min = Phi_min;
<a name="l00671"></a>00671             phi_max = Phi_max;
<a name="l00672"></a>00672         }
<a name="l00673"></a>00673         <span class="keywordflow">else</span>                    {
<a name="l00674"></a>00674             phi_min = Phi_max;
<a name="l00675"></a>00675             phi_max = Phi_min;
<a name="l00676"></a>00676         }
<a name="l00677"></a>00677         <span class="keywordflow">if</span> (phi_max - phi_min &lt; 1.99999*M_PI) {
<a name="l00678"></a>00678             has_phi = <span class="keyword">true</span>;
<a name="l00679"></a>00679         }
<a name="l00680"></a>00680         <span class="keywordflow">else</span> {
<a name="l00681"></a>00681             has_phi = <span class="keyword">false</span>;
<a name="l00682"></a>00682         }
<a name="l00683"></a>00683     };
<a name="l00684"></a>00684 
<a name="l00688"></a><a class="code" href="classEGS__CylinderShape.html#a69affe00ee17526f6c93f897f78aa8cf">00688</a>     <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> <a class="code" href="classEGS__CylinderShape.html#a69affe00ee17526f6c93f897f78aa8cf" title="Samples and returns a point uniformly distributed within the cylinder.">getPoint</a>(<a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *rndm) {
<a name="l00689"></a>00689         EGS_Float x,y;
<a name="l00690"></a>00690         getPointInCircle(rndm,x,y);
<a name="l00691"></a>00691         EGS_Float z = h*(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-0.5);
<a name="l00692"></a>00692         <span class="keywordflow">return</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a>(x,y,z) + xo;
<a name="l00693"></a>00693     };
<a name="l00694"></a>00694 
<a name="l00698"></a>00698     <a class="code" href="classEGS__Object.html" title="Base egspp object.">EGS_Object</a> *<a class="code" href="classEGS__Object.html#a1048cc275a04cbffe4ec2d608fbe52dc" title="Create an object from the infromation pointed to by inp.">createObject</a>(<a class="code" href="classEGS__Input.html" title="A class for storing information in a tree-like structure of key-value pairs. This class is used throu...">EGS_Input</a> *);
<a name="l00699"></a>00699 
<a name="l00701"></a><a class="code" href="classEGS__CylinderShape.html#aceb4481f39ca53417e15fc88a52c017f">00701</a>     EGS_Float <a class="code" href="classEGS__CylinderShape.html#aceb4481f39ca53417e15fc88a52c017f">getRadius</a>()<span class="keyword"> const </span>{
<a name="l00702"></a>00702         <span class="keywordflow">return</span> R;
<a name="l00703"></a>00703     };
<a name="l00705"></a><a class="code" href="classEGS__CylinderShape.html#a5880060387742934aaaa04e1b2045ba4">00705</a>     EGS_Float <a class="code" href="classEGS__CylinderShape.html#a5880060387742934aaaa04e1b2045ba4">getHeight</a>()<span class="keyword"> const </span>{
<a name="l00706"></a>00706         <span class="keywordflow">return</span> h;
<a name="l00707"></a>00707     };
<a name="l00708"></a>00708 
<a name="l00712"></a><a class="code" href="classEGS__CylinderShape.html#ae0c78f152f0bb73221e59eb951760b3e">00712</a>     <span class="keywordtype">bool</span> <a class="code" href="classEGS__CylinderShape.html#ae0c78f152f0bb73221e59eb951760b3e" title="Returns true. (It is easy to implement the getPointSourceDirection() method for a cylinder...">supportsDirectionMethod</a>()<span class="keyword"> const </span>{
<a name="l00713"></a>00713         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00714"></a>00714     };
<a name="l00715"></a>00715 
<a name="l00720"></a><a class="code" href="classEGS__CylinderShape.html#a059efbd0ba7315b6cc8a1b2c0133d9bd">00720</a>     <span class="keywordtype">void</span> <a class="code" href="classEGS__BaseShape.html#a36d3970fbe24be3b2701124a76fcef09">getPointSourceDirection</a>(<span class="keyword">const</span> <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;Xo,
<a name="l00721"></a>00721                                  <a class="code" href="classEGS__RandomGenerator.html" title="Base random number generator class. All random number generators should be derived from this class...">EGS_RandomGenerator</a> *rndm, <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> &amp;u, EGS_Float &amp;wt) {
<a name="l00722"></a>00722         <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> xo = T ? Xo*(*T) : Xo;
<a name="l00723"></a>00723         EGS_Float eta = rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()*(R+h);
<a name="l00724"></a>00724         <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> x;                               <span class="comment">// point on cylinder with respect to midpoint</span>
<a name="l00725"></a>00725         <a class="code" href="classEGS__Vector.html" title="A class representing 3D vectors.">EGS_Vector</a> n;                               <span class="comment">// normal to cylinder at point x</span>
<a name="l00726"></a>00726         <span class="keywordflow">if</span> (eta &lt; R) {
<a name="l00727"></a>00727             getPointInCircle(rndm,x.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a>,x.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a>);
<a name="l00728"></a>00728             <span class="keywordflow">if</span> (2*eta &lt; R) {
<a name="l00729"></a>00729                 x.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> = h/2;    <span class="comment">// top face: normal is up</span>
<a name="l00730"></a>00730                 n.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> = 1;
<a name="l00731"></a>00731             }
<a name="l00732"></a>00732             <span class="keywordflow">else</span> {
<a name="l00733"></a>00733                 x.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> = -h/2;    <span class="comment">// bottom face: normal is down</span>
<a name="l00734"></a>00734                 n.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> = -1;
<a name="l00735"></a>00735             }
<a name="l00736"></a>00736         }
<a name="l00737"></a>00737         <span class="keywordflow">else</span> {
<a name="l00738"></a>00738             EGS_Float cphi,sphi;
<a name="l00739"></a>00739             rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#a1a8125374996eec60b8e017aca93c047" title="Sets cphi and sphi to the cosine and sine of a random angle uniformely distributed between 0 and ...">getAzimuth</a>(cphi,sphi);
<a name="l00740"></a>00740             x.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a> = R*cphi;
<a name="l00741"></a>00741             x.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a> = R*sphi;
<a name="l00742"></a>00742             x.<a class="code" href="classEGS__Vector.html#a4d45f2e6f756337d6b06b006e04bfc87" title="z-component">z</a> = h*(rndm-&gt;<a class="code" href="classEGS__RandomGenerator.html#abad39a80b392acb3ab7935db0bd94b79" title="Returns a random number uniformly distributed between zero (inclusive) and 1 (exclusive).">getUniform</a>()-0.5);
<a name="l00743"></a>00743             n.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a> = x.<a class="code" href="classEGS__Vector.html#aa67c962f9024c44d15f446c122d25cbf" title="x-component">x</a>;
<a name="l00744"></a>00744             n.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a> = x.<a class="code" href="classEGS__Vector.html#a156335a0c0cee0f4c6f6e23aac316350" title="y-component">y</a>;                   <span class="comment">// side face: normal is (x,y)</span>
<a name="l00745"></a>00745         }
<a name="l00746"></a>00746         u = (x+this-&gt;xo) - xo;                      <span class="comment">// direction vector from origin to cylinder point</span>
<a name="l00747"></a>00747         EGS_Float d2 = u.length2(), d = sqrt(d2);
<a name="l00748"></a>00748         u *= (1/d);                                 <span class="comment">// normalize direction vectors</span>
<a name="l00749"></a>00749         n.normalize();                              <span class="comment">// normalize normal</span>
<a name="l00750"></a>00750         wt = u*n*<a class="code" href="classEGS__BaseShape.html#a8307bc7ddfa99a380b3ae1f9987d2464">area</a>()/d2;
<a name="l00751"></a>00751         <span class="keywordflow">if</span> (T) {
<a name="l00752"></a>00752             T-&gt;rotate(u);
<a name="l00753"></a>00753         }
<a name="l00754"></a>00754     };
<a name="l00756"></a><a class="code" href="classEGS__CylinderShape.html#a5f7f0d3f1d6397316a87c370b5f5ab8d">00756</a>     EGS_Float <a class="code" href="classEGS__CylinderShape.html#a5f7f0d3f1d6397316a87c370b5f5ab8d" title="Returns the cylinder surface area.">area</a>()<span class="keyword"> const </span>{
<a name="l00757"></a>00757         <span class="keywordflow">return</span> 2*M_PI*R*(R+h);
<a name="l00758"></a>00758     };
<a name="l00759"></a>00759 };
<a name="l00760"></a>00760 
<a name="l00761"></a>00761 <span class="preprocessor">#endif</span>
<a name="l00762"></a>00762 <span class="preprocessor"></span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
